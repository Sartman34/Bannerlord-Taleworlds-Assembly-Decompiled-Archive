using System.Collections.Generic;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Election;

public class Supporter
{
	public enum SupportWeights
	{
		Choose,
		StayNeutral,
		SlightlyFavor,
		StronglyFavor,
		FullyPush
	}

	[SaveableField(0)]
	public readonly Clan Clan;

	[SaveableField(1)]
	public SupportWeights SupportWeight;

	[SaveableField(2)]
	public string ImagePath;

	public bool IsPlayer => Clan.Leader.IsHumanPlayerCharacter;

	public TextObject Name => Clan.Leader.Name;

	public TextObject EncyclopediaLinkWithName => Clan.Leader.EncyclopediaLinkWithName;

	internal static void AutoGeneratedStaticCollectObjectsSupporter(object o, List<object> collectedObjects)
	{
		((Supporter)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
	}

	protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
	{
		collectedObjects.Add(Clan);
	}

	internal static object AutoGeneratedGetMemberValueClan(object o)
	{
		return ((Supporter)o).Clan;
	}

	internal static object AutoGeneratedGetMemberValueSupportWeight(object o)
	{
		return ((Supporter)o).SupportWeight;
	}

	internal static object AutoGeneratedGetMemberValueImagePath(object o)
	{
		return ((Supporter)o).ImagePath;
	}

	public Supporter(Clan clan)
	{
		Clan = clan;
		SupportWeight = SupportWeights.StayNeutral;
	}

	public override bool Equals(object obj)
	{
		if (!(obj is Supporter supporter))
		{
			return false;
		}
		return supporter.Clan == Clan;
	}

	public override int GetHashCode()
	{
		return base.GetHashCode();
	}
}
