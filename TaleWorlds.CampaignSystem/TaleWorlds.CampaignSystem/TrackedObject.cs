using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem;

public class TrackedObject
{
	[SaveableField(0)]
	public ITrackableBase Object;

	[SaveableField(1)]
	public int TrackerCount;

	public TextObject Name => Object.GetName();

	public Vec3 Position => Object.GetPosition();

	public float Distance => Object.GetTrackDistanceToMainAgent();

	internal static void AutoGeneratedStaticCollectObjectsTrackedObject(object o, List<object> collectedObjects)
	{
		((TrackedObject)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
	}

	protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
	{
		collectedObjects.Add(Object);
	}

	internal static object AutoGeneratedGetMemberValueObject(object o)
	{
		return ((TrackedObject)o).Object;
	}

	internal static object AutoGeneratedGetMemberValueTrackerCount(object o)
	{
		return ((TrackedObject)o).TrackerCount;
	}

	public TrackedObject(ITrackableBase obj)
	{
		Object = obj;
		TrackerCount = 1;
	}

	public bool Compare(TrackedObject obj)
	{
		return Object == obj.Object;
	}
}
