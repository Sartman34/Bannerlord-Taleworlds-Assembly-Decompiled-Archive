using System.Collections.Generic;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries;

public class IssueQuestStartLogEntry : LogEntry
{
	[SaveableField(10)]
	public readonly Hero IssueGiver;

	public override CampaignTime KeepInHistoryTime => CampaignTime.Weeks(1f);

	internal static void AutoGeneratedStaticCollectObjectsIssueQuestStartLogEntry(object o, List<object> collectedObjects)
	{
		((IssueQuestStartLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
	}

	protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
	{
		base.AutoGeneratedInstanceCollectObjects(collectedObjects);
		collectedObjects.Add(IssueGiver);
	}

	internal static object AutoGeneratedGetMemberValueIssueGiver(object o)
	{
		return ((IssueQuestStartLogEntry)o).IssueGiver;
	}

	public IssueQuestStartLogEntry(Hero questGiver)
	{
		IssueGiver = questGiver;
	}

	public override void GetConversationScoreAndComment(Hero talkTroop, bool findString, out string comment, out ImportanceEnum score)
	{
		score = ImportanceEnum.Zero;
		comment = "";
		if (IssueGiver == talkTroop)
		{
			score = ImportanceEnum.SomewhatImportant;
			if (findString)
			{
				comment = "str_comment_quest_taken";
			}
		}
	}
}
